(()=>{"use strict";var e={n:s=>{var a=s&&s.__esModule?()=>s.default:()=>s;return e.d(a,{a}),a},d:(s,a)=>{for(var t in a)e.o(a,t)&&!e.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:a[t]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.domReady;var a=e.n(s);const t=window.wp.element,n=window.wp.apiFetch;var c=e.n(n);const o=window.wp.components,r=window.wp.i18n,i=window.wp.compose,l=window.wp.data,d=window.wp.notices,p=window.ReactJSXRuntime;function h(){const e=(0,l.useSelect)(e=>e(d.store).getNotices().filter(e=>"snackbar"===e.type),[]),{removeNotice:s}=(0,l.useDispatch)(d.store);return(0,p.jsx)("div",{style:{position:"relative"},children:(0,p.jsx)(o.SnackbarList,{notices:e,onRemove:s})})}function m(){var e;const[s,a]=(0,t.useState)(null),[n,d]=(0,t.useState)(!1),[m,u]=(0,t.useState)(null),[_,x]=(0,t.useState)(null),g=(0,i.useCopyToClipboard)(()=>null!=m?m:"",()=>{(0,l.dispatch)("core/notices").createNotice("success",(0,r.__)("Sitemap URL copied to clipboard.","xml-cache"),{type:"snackbar",isDismissible:!0})}),b=(e,t)=>{if(!s||!1===s)return;const n=[{...s[0],[e]:t},s[1]?{...s[1]}:{}];a(n),((e=s)=>{c()({path:xmlCache.restApiNamespace+"/settings",method:"POST",data:e}).then(e=>{e.success?(d(!0),(0,l.dispatch)("core/notices").createNotice("success",(0,r.__)("Settings saved.","xml-cache"),{type:"snackbar",isDismissible:!0})):(0,l.dispatch)("core/notices").createNotice("error",(0,r.__)("Settings could't be saved.","xml-cache"),{type:"snackbar",isDismissible:!0})}).catch(e=>{console.error(e)})})(n)};return(0,t.useEffect)(()=>(c()({path:xmlCache.restApiNamespace+"/settings"}).then(e=>{e.success?a(e.data):(a(!1),x(e.message))}).catch(e=>{console.error(e),a(!1),x(e.message)}),c()({path:xmlCache.restApiNamespace+"/xml-sitemap-url"}).then(e=>{e.success?u(e.data.sitemap_url):(u(!1),x(e.message))}).catch(e=>{u(!1),x(e.message)}),()=>{d(!1)}),[n]),null===s||null===m?(0,p.jsx)(o.Spinner,{}):(0,p.jsxs)("div",{className:"wrap",children:[(0,p.jsx)(h,{}),(0,p.jsxs)(o.Card,{style:{maxWidth:"500px"},children:[(0,p.jsx)(o.CardHeader,{children:(0,p.jsx)("h1",{children:(0,r.__)("XML Cache Settings","xml-cache")})}),_&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.CardBody,{children:(0,p.jsx)(o.Notice,{status:"error",isDismissible:!1,children:(0,r.sprintf)((0,r.__)("%s","xml-cache"),_)})}),(0,p.jsx)(o.CardDivider,{})]}),(0,p.jsx)(o.CardBody,{children:(0,p.jsx)("p",{children:(0,r.__)("XML Cache generates an XML sitemap for cache plugins. Select which sections you want to include in the sitemap. URLs that are set to noindex are also included in the sitemap. You can specify the sitemap in your cache plugin's settings to automatically warm up your entire cache.","xml-cache")})}),(0,p.jsx)(o.CardDivider,{}),(0,p.jsxs)(o.CardBody,{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,p.jsx)(o.Button,{variant:"primary",href:m,icon:"admin-links",size:"compact",target:"_blank",disabled:!1===s||!1===m,children:(0,r.__)("Open Sitemap","xml-cache")}),(0,p.jsx)(o.Button,{variant:"secondary",icon:"clipboard",size:"compact",ref:g,disabled:!1===s||!1===m,children:(0,r.__)("Copy Sitemap URL","xml-cache")})]}),(0,p.jsx)(o.CardDivider,{}),(0,p.jsxs)(o.CardBody,{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"center"},children:[(0,p.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,r.__)("Include posts","xml-cache"),checked:s[0].posts_enabled,onChange:e=>b("posts_enabled",e),disabled:!1===s||!1===m}),(0,p.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,r.__)("Include custom post types","xml-cache"),checked:null===(e=s[0].custom_post_types_enabled)||void 0===e||e,onChange:e=>b("custom_post_types_enabled",e),disabled:!1===s||!1===m}),(0,p.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,r.__)("Include categories","xml-cache"),checked:s[0].categories_enabled,onChange:e=>b("categories_enabled",e),disabled:!1===s||!1===m}),(0,p.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,r.__)("Include archives","xml-cache"),checked:s[0].archives_enabled,onChange:e=>b("archives_enabled",e),disabled:!1===s||!1===m}),(0,p.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,r.__)("Include tags","xml-cache"),checked:s[0].tags_enabled,onChange:e=>b("tags_enabled",e),disabled:!1===s||!1===m})]}),(0,p.jsx)(o.CardFooter,{children:(0,p.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,r.sprintf)((0,r.__)('Got questions, issues, or feature ideas? <a href="%s" target="_blank" rel="noopener">Visit the support forum</a>. Enjoying the plugin? <a href="%s" target="_blank" rel="noopener">Please leave a review</a> â€” it really helps. Developers are welcome to contribute on <a href="%s" target="_blank" rel="noopener">GitHub</a>.',"xml-cache"),xmlCache.supportUrl,xmlCache.reviewUrl,xmlCache.githubUrl)}})})]})]})}a()(()=>{const e=document.querySelector("xml-cache");null!==e&&(0,t.createRoot)(e).render((0,p.jsx)(m,{}))})})();