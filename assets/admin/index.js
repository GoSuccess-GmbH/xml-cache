(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.domReady;var a=e.n(n);const c=window.wp.element,l=window.wp.apiFetch;var o=e.n(l);const s=window.wp.components,r=window.wp.i18n,i=window.wp.data,_=window.wp.notices;function h(){const e=(0,i.useSelect)((e=>e(_.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:n}=(0,i.useDispatch)(_.store);return(0,t.createElement)(s.SnackbarList,{notices:e,onRemove:n})}function p(){const e="/xml-cache/v1";o().use(o().createNonceMiddleware("xml_cache_nonce"));const[n,a]=(0,c.useState)(null),[l,_]=(0,c.useState)(!1),[p,m]=(0,c.useState)(null),d=()=>{o()({path:e+"/settings",method:"POST",data:n}).then((e=>{e.success?(_(!0),(0,i.dispatch)("core/notices").createNotice("success",(0,r.__)("Settings saved.","xml-cache"),{type:"snackbar",isDismissible:!0})):(0,i.dispatch)("core/notices").createNotice("error",(0,r.__)("Settings could't be saved.","xml-cache"),{type:"snackbar",isDismissible:!0})})).catch((e=>{console.error(e)}))},u=(e,t)=>{n[1][e]=t,a(n),d()},b=(e,t)=>{n[0][e]=t,a(n),d()};return(0,c.useEffect)((()=>(o()({path:e+"/settings"}).then((e=>{a(e)})).catch((e=>{console.error(e)})),o()({path:e+"/sitemap-url"}).then((e=>{m(e.sitemap_url)})).catch((e=>{console.error(e)})),()=>{_(!1)})),[l]),null===n||null==p?(0,t.createElement)(s.Spinner,null):(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.Panel,{header:(0,r.__)("XML Cache Settings","xml-cache")},(0,t.createElement)(s.PanelHeader,null,(0,t.createElement)(s.Button,{variant:"primary",href:p,icon:"admin-links",size:"compact",target:"_blank"},(0,r.__)("Open Sitemap","xml-cache"))),(0,t.createElement)(s.PanelBody,{title:(0,r.__)("Posts","xml-cache"),initialOpen:n[1].is_posts_panel_open,onToggle:e=>u("is_posts_panel_open",e)},(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for posts?","xml-cache"),checked:n[0].posts_enabled,onChange:e=>b("posts_enabled",e)}))),(0,t.createElement)(s.PanelBody,{title:(0,r.__)("Categories","xml-cache"),initialOpen:n[1].is_categories_panel_open,onToggle:e=>u("is_categories_panel_open",e)},(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for categories?","xml-cache"),checked:n[0].categories_enabled,onChange:e=>b("categories_enabled",e)}))),(0,t.createElement)(s.PanelBody,{title:(0,r.__)("Archives","xml-cache"),initialOpen:n[1].is_archives_panel_open,onToggle:e=>u("is_archives_panel_open",e)},(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for archives?","xml-cache"),checked:n[0].archives_enabled,onChange:e=>b("archives_enabled",e)}))),(0,t.createElement)(s.PanelBody,{title:(0,r.__)("Tags","xml-cache"),initialOpen:n[1].is_tags_panel_open,onToggle:e=>u("is_tags_panel_open",e)},(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for tags?","xml-cache"),checked:n[0].tags_enabled,onChange:e=>b("tags_enabled",e)})))),(0,t.createElement)(h,null))}a()((()=>{const e=document.querySelector("xml-cache-settings");null!==e&&(0,c.render)((0,t.createElement)(p,null),e)}))})();